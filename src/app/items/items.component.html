<div class="inventory-container">
    <div class="header">
        <h1>All Items</h1>
        <p class="subtitle">Item detail Information</p>
    </div>

    <div class="actions-bar">
        <div class="search-container">
            <i class="fal fa-search search-icon"></i>
            <input type="text" placeholder="Search Item" class="search-input" (input)="onSearch($event)">
        </div>

        <div class="button-group">
            <button class="btn import-btn">
                <i class="fal fa-filter"></i> Filter
            </button>
            <button (click)="openModal()" class="btn add-btn">
                <i class="fal fa-plus"></i> Add Item
            </button>
        </div>
    </div>

    <div class="table-container">
        <table *ngIf="!(isLoading$ | async) && inventories$" matSort
            (matSortChange)="onSort($event)">
            <thead>
                <tr>
                    <th mat-sort-header="id" role="button">ID</th>
                    <th mat-sort-header="brand_name" role="button">Brand Name</th>
                    <th mat-sort-header="type" role="button">Type</th>
                    <th mat-sort-header="quantity_on_hand" role="button">Quantity</th>
                    <th mat-sort-header="price" role="button">Price</th>
                    <th mat-sort-header="inventory_value" role="button">Inventory Value</th>
                    <th mat-sort-header="products_sold" role="button">Product Sold</th>
                    <th mat-sort-header="sales_value" role="button">Sales Value</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let inventory of inventories$ | async">
                    <td>{{ inventory.id }}</td>
                    <td>{{ inventory.brand_name }}</td>
                    <td>{{ inventory.type }}</td>
                    <td>{{ inventory.quantity_on_hand }} pcs</td>
                    <td>{{ inventory.price | currency }}</td>
                    <td>{{ inventory.inventory_value | currency }}</td>
                    <td>{{ inventory.products_sold }}</td>
                    <td>{{ inventory.sales_value | currency }}</td>
                    <td class="actions-cell">
                        <button class="action-btn modify-btn" (click)="openModal(inventory)">
                            <i class="fal fa-pencil"></i>
                        </button>
                        <button class="action-btn delete-btn" (click)="onDelete(inventory)">
                            <i class="fal fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="pagination-container" *ngIf="totalItems > 0">
            <ngb-pagination
                [collectionSize]="totalItems"
                [(page)]="currentPage"
                [pageSize]="itemsPerPage"
                [maxSize]="5"
                [rotate]="true"
                [boundaryLinks]="true"
                (pageChange)="changePage($event)"
                aria-label="Pagination navigation">
            </ngb-pagination>
            <div class="page-size-selector">
                <label for="pageSize">Items per page:</label>
                <select id="pageSize" [(ngModel)]="itemsPerPage" (change)="changeItemsPerPage()">
                    <option [value]="10">10</option>
                    <option [value]="25">25</option>
                    <option [value]="50">50</option>
                    <option [value]="100">100</option>
                </select>
            </div>
        </div>

        <div *ngIf="!(isLoading$ | async) && !inventories$" class="no-items-message">
            <i class="fal fa-dolly-empty"></i>
            <p>No inventories found.</p>
            <span class="suggestion">Try adding an item.</span>
        </div>

        <div *ngIf="isLoading$ | async" class="loading-inventories">
            <i class="fal fa-spinner"></i>
            <p>Loading all inventories from database.</p>
        </div>
    </div>

</div>